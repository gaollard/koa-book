webpackJsonp([11],{"7KNn":function(t,e){},FynC:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o={props:{curIndex:{type:Number,default:1},list:{type:Array,default:function(){return[{text:"首页",path:"/"},{text:"分类",path:"/category"},{text:"购物车",path:"/cart"},{text:"我的",path:"/account"}]}}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"tabbar-list"},t._l(t.list,function(e,a){return n("li",{key:a,staticClass:"tabbar-item",class:{"is-active":a+1===t.curIndex}},[n("router-link",{attrs:{to:e.path},domProps:{textContent:t._s(e.text)}})],1)}))},staticRenderFns:[]};var s={name:"App",components:{Tabbar:n("VU/8")(o,r,!1,function(t){n("7KNn")},"data-v-5ef7453b",null).exports},data:function(){return{tabbarIndex:1,showTabbar:!0,animation:"slide-left"}},computed:{routeName:function(){return this.$route.name?this.$route.name.toLocaleLowerCase():""}},watch:{$route:function(t,e){this.tabbarIndex=this.$route.meta.tabbarIndex||1,this.showTabbar=!!this.$route.meta.showTabbar;var n=t.path.split("/").length,a=e.path.split("/").length;this.animation=n<a?"slide-right":"slide-left"}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"fade"}},[e("div",{class:"page-"+this.routeName},[e("router-view"),this._v(" "),e("Tabbar",{directives:[{name:"show",rawName:"v-show",value:this.showTabbar,expression:"showTabbar"}],attrs:{curIndex:this.tabbarIndex}})],1)])],1)},staticRenderFns:[]};var c=n("VU/8")(s,i,!1,function(t){n("FynC")},null,null).exports,u=n("/ocq"),d=n("Y4FN"),l=n.n(d);a.default.use(u.a);var p=new u.a({mode:"history",routes:[{path:"/",name:"Welcome",component:function(){return n.e(8).then(n.bind(null,"hSyW"))},meta:{showTabbar:!0,tabbarIndex:1}},{path:"/category",name:"category",component:function(){return n.e(1).then(n.bind(null,"fzpE"))},meta:{showTabbar:!0,tabbarIndex:2}},{path:"/cart",name:"Cart",component:function(){return n.e(9).then(n.bind(null,"/M1Q"))},meta:{showTabbar:!0,tabbarIndex:3}},{path:"/movies",name:"Movies",component:function(){return n.e(0).then(n.bind(null,"zDuH"))},meta:{title:"电影列表"}},{path:"/movie/:movieId",name:"MovieDetail",component:function(){return n.e(5).then(n.bind(null,"8Gl7"))},meta:{title:"电影详情"}},{path:"/musics",name:"Musics",component:function(){return n.e(3).then(n.bind(null,"4uOb"))}},{path:"/books",name:"Books",component:function(){return n.e(7).then(n.bind(null,"WaLu"))}},{path:"/account",name:"Account",component:function(){return n.e(2).then(n.bind(null,"B64m"))},meta:{requireAuth:!0,showTabbar:!0,tabbarIndex:4}},{path:"/login",name:"Login",component:function(){return n.e(6).then(n.bind(null,"W2Q3"))}},{path:"*",name:"Lost",component:function(){return n.e(4).then(n.bind(null,"8t/u"))}}]});p.beforeEach(function(t,e,n){t.meta.title&&(document.title=t.meta.title),t.matched.some(function(t){return t.meta.requireAuth})?l.a.get("userInfo")?n():n({path:"/login",query:{redirect:t.fullPath}}):n()});var g=p,m=n("NYxO"),f=n("Xxa5"),b=n.n(f),h=n("exGp"),v=n.n(h),x=n("P9l9"),w=n("Au9i"),I=[{text:"正在热映",id:"in_theaters"},{text:"即将上映",id:"coming_soon"},{text:"top250",id:"top250"},{text:"口碑榜单",id:"weekly"},{text:"北美票房榜",id:"us_box"},{text:"新片榜单",id:"new_movies"}],y={start:0,count:10,total:0},L={namespaced:!0,state:{banners:[{img:"https://mall.s.maizuo.com/0690e3551f92b8b1dcdf9be0dc3b9b69.jpg?x-oss-process=image/quality,Q_70",link:""},{img:"https://mall.s.maizuo.com/2653a4597c3a11e74fe858185917fb1e.jpg?x-oss-process=image/quality,Q_70",link:""}],tags:I,tag:I[0],list:[],loading:!1,pageInfo:{start:0,count:10,total:0}},getters:{pageInfo:function(t){return{start:parseInt(t.pageInfo.start),count:parseInt(t.pageInfo.count),total:parseInt(t.pageInfo.total)}}},mutations:{getMovies:function(t,e){t.list=e},getPageInfo:function(t,e){t.pageInfo=e},setLoading:function(t,e){t.loading=e},setTag:function(t,e){t.tag=e}},actions:{getMovies:function(t){var e=this,n=t.commit,a=t.state;return v()(b.a.mark(function t(){var o,r,s,i,c,u;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n("getPageInfo",y),n("getMovies",[]),n("setLoading",!0),t.next=6,x.a.getMovies(a.tag.id,a.pageInfo.start,a.pageInfo.count);case 6:o=t.sent,r=o.data,s=r.count,i=r.start,c=r.subjects,u=r.total,n("getMovies",c),n("getPageInfo",{count:s,start:i,total:u}),n("setLoading",!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),Object(w.Toast)({message:t.t0.msg,position:"bottom",duration:5e3});case 16:case"end":return t.stop()}},t,e,[[0,13]])}))()},loadMore:function(t){var e=this,n=t.commit,a=t.state;return v()(b.a.mark(function t(){var o,r,s,i,c,u;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("setLoading",!0),t.next=3,x.a.getMovies(a.tag.id,a.list.length,a.pageInfo.count);case 3:o=t.sent,r=o.data,s=r.count,i=r.start,c=r.subjects,u=r.total,n("getMovies",a.list.concat(c)),n("getPageInfo",{count:s,start:i,total:u}),n("setLoading",!1);case 8:case"end":return t.stop()}},t,e)}))()}}},M={namespaced:!0,state:{categorys:[],loading:!1},getters:{categorys:function(){return[]}},mutations:{setCategorys:function(t,e){t.categorys=e},setLoading:function(t,e){t.loading=e}},actions:{getCategorys:function(t){var e=this,n=t.commit;t.state;return v()(b.a.mark(function t(){var a;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("setLoading",!0),t.next=3,x.a.getCategorys();case 3:a=t.sent,n("setCategorys",a.data.data.categorys),n("setLoading",!1);case 6:case"end":return t.stop()}},t,e)}))()}}},_={namespaced:!0,state:{brands:[],loading:!1},getters:{brands:function(t){return t.brands}},mutations:{setBrands:function(t,e){t.brands=e},setLoading:function(t,e){t.loading=e}},actions:{getBrands:function(t){var e=this,n=t.commit;t.state;return v()(b.a.mark(function t(){var a;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("setLoading",!0),t.next=3,x.a.getBrands();case 3:a=t.sent,n("setBrands",a.data.data.brands),n("setLoading",!1);case 6:case"end":return t.stop()}},t,e)}))()}}},k={namespaced:!0,state:{products:[],loading:!1},getters:{products:function(t){return t.products}},mutations:{setProducts:function(t,e){t.products=e},setLoading:function(t,e){t.loading=e}},actions:{getProducts:function(t){var e=this,n=t.commit;t.state;return v()(b.a.mark(function t(){var a;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("setLoading",!0),t.next=3,x.a.getProducts();case 3:a=t.sent,n("setProducts",a.data.data.products),n("setLoading",!1);case 6:case"end":return t.stop()}},t,e)}))()}}};a.default.use(m.a);var T=new m.a.Store({state:{imgRoot:"//static.airtlab.com/productlogo/"},modules:{movie:L,category:M,brand:_,product:k}});n("S2ic");a.default.config.productionTip=!1,new a.default({el:"#app",router:g,store:T,components:{App:c},template:"<App/>"})},P9l9:function(t,e,n){"use strict";(function(t){var a=n("mtWM"),o=n.n(a),r="//book.airtlab.com/",s="production"===t.NODE_ENV?r:"//api.airtlab.com:3002/";e.a={getMovieTop250:function(t,e){return o.a.get(r+"movie/top250?start="+t+"&count="+e)},getMovies:function(t,e,n){return o.a.get(r+"movie/"+t+"?start="+e+"&count="+n)},getMovieDetail:function(t){return o.a.get(r+"movie/subject/"+t)},searchMusic:function(t){return o.a.get(r+"music/search?tag="+t)},getCategorys:function(){return o.a.get(s+"category/")},getBrands:function(){return o.a.get(s+"brand/")},getProducts:function(){return o.a.get(s+"product/")}}}).call(e,n("W2nU"))},S2ic:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.368775eb0373d13c0da6.js.map